!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],e):"object"==typeof exports?exports.ReactContextMenu=e(require("react"),require("react-dom")):t.ReactContextMenu=e(t.React,t.ReactDOM)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(10);Object.defineProperty(e,"ContextMenu",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(11);Object.defineProperty(e,"ContextMenuLayer",{enumerable:!0,get:function(){return r(i)["default"]}});var s=n(15);Object.defineProperty(e,"MenuItem",{enumerable:!0,get:function(){return r(s)["default"]}});var a=n(6);Object.defineProperty(e,"monitor",{enumerable:!0,get:function(){return r(a)["default"]}})},function(e,n){e.exports=t},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(t,e){for(var i,s,a=n(t),c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var u in i)r.call(i,u)&&(a[u]=i[u]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(i);for(var f=0;f<s.length;f++)o.call(i,s[f])&&(a[s[f]]=i[s[f]])}}return a}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(4),c=n(12),u=r(c),f=n(13),p=r(f),l=function(t){function e(){o(this,e);var t=i(this,Object.getPrototypeOf(e).call(this));return t.createActions("menu",u["default"]),t.createStore("menu",p["default"],t),t}return s(e,t),e}(a.Flummox);e["default"]=new l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return t.prototype.constructor.name}function c(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}e.__esModule=!0,e.Actions=e.Store=e.Flummox=e.Flux=void 0;var u=n(18),f=r(u),p=n(17),l=r(p),h=n(21),d=n(8),y=r(d),v=n(2),b=r(v),_=function(t){function e(){o(this,e);var n=i(this,t.call(this));return n.dispatcher=new h.Dispatcher,n._stores={},n._actions={},n}return s(e,t),e.prototype.createStore=function(t,e){if(!(e.prototype instanceof f["default"])){var n=a(e);throw new Error("You've attempted to create a store from the class "+n+", which does not have the base Store class in its prototype chain. Make sure "+("you're using the `extends` keyword: `class "+n+" extends ")+"Store { ... }`")}if(this._stores.hasOwnProperty(t)&&this._stores[t])throw new Error("You've attempted to create multiple stores with key "+t+". Keys must be unique.");for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;r>i;i++)o[i-2]=arguments[i];var s=new(Function.prototype.bind.apply(e,[null].concat(o))),c=this.dispatcher.register(s.handler.bind(s));return s._waitFor=this.waitFor.bind(this),s._token=c,s._getAllActionIds=this.getAllActionIds.bind(this),this._stores[t]=s,s},e.prototype.getStore=function(t){return this._stores.hasOwnProperty(t)?this._stores[t]:void 0},e.prototype.removeStore=function(t){if(!this._stores.hasOwnProperty(t))throw new Error("You've attempted to remove store with key "+t+" which does not exist.");this._stores[t].removeAllListeners(),this.dispatcher.unregister(this._stores[t]._token),delete this._stores[t]},e.prototype.createActions=function(t,e){if(!(e.prototype instanceof l["default"])&&e!==l["default"]){if("function"==typeof e){var n=a(e);throw new Error("You've attempted to create actions from the class "+n+", which does not have the base Actions class in its prototype chain. Make "+("sure you're using the `extends` keyword: `class "+n+" ")+"extends Actions { ... }`")}var r=e;e=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return s(e,t),e}(l["default"]),(0,b["default"])(e.prototype,r)}if(this._actions.hasOwnProperty(t)&&this._actions[t])throw new Error("You've attempted to create multiple actions with key "+t+". Keys must be unique.");for(var c=arguments.length,u=Array(c>2?c-2:0),f=2;c>f;f++)u[f-2]=arguments[f];var p=new(Function.prototype.bind.apply(e,[null].concat(u)));return p.dispatch=this.dispatch.bind(this),p.dispatchAsync=this.dispatchAsync.bind(this),this._actions[t]=p,p},e.prototype.getActions=function(t){return this._actions.hasOwnProperty(t)?this._actions[t]:void 0},e.prototype.getActionIds=function(t){var e=this.getActions(t);if(e)return e.getConstants()},e.prototype.removeActions=function(t){if(!this._actions.hasOwnProperty(t))throw new Error("You've attempted to remove actions with key "+t+" which does not exist.");delete this._actions[t]},e.prototype.getAllActionIds=function(){var t=[];for(var e in this._actions)if(this._actions.hasOwnProperty(e)){var n=this._actions[e].getConstants();t=t.concat(c(n))}return t},e.prototype.dispatch=function(t,e){this._dispatch({actionId:t,body:e})},e.prototype.dispatchAsync=function(t,e,n){var r=this,o={actionId:t,async:"begin"};return n&&(o.actionArgs=n),this._dispatch(o),e.then(function(e){return r._dispatch({actionId:t,body:e,async:"success"}),e},function(e){r._dispatch({actionId:t,error:e,async:"failure"})})["catch"](function(t){throw r.emit("error",t),t})},e.prototype._dispatch=function(t){this.dispatcher.dispatch(t),this.emit("dispatch",t)},e.prototype.waitFor=function(t){Array.isArray(t)||(t=[t]);var e=function(t){return t instanceof f["default"]?t._token:t},n=t.map(e);this.dispatcher.waitFor(n)},e.prototype.removeAllStoreListeners=function(t){for(var e in this._stores)if(this._stores.hasOwnProperty(e)){var n=this._stores[e];n.removeAllListeners(t)}},e.prototype.serialize=function(){var t={};for(var e in this._stores)if(this._stores.hasOwnProperty(e)){var n=this._stores[e],r=n.constructor.serialize;if("function"==typeof r){var o=r(n.state);if("string"!=typeof o){n.constructor.name}if(t[e]=o,"function"!=typeof n.constructor.deserialize){n.constructor.name}}}return JSON.stringify(t)},e.prototype.deserialize=function(t){var e=void 0;try{e=JSON.parse(t)}catch(n){this.constructor.name}for(var r in this._stores)if(this._stores.hasOwnProperty(r)){var o=this._stores[r],i=o.constructor.deserialize;if("function"==typeof i){var s=e[r],a=i(s);if(o.replaceState(a),"function"!=typeof o.constructor.serialize){o.constructor.name}}}},e}(y["default"]);e["default"]=_,_.prototype.getConstants=_.prototype.getActionIds,_.prototype.getAllConstants=_.prototype.getAllActionIds,_.prototype.dehydrate=_.prototype.serialize,_.prototype.hydrate=_.prototype.deserialize;var g=_;e.Flux=_,e.Flummox=g,e.Store=f["default"],e.Actions=l["default"]},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return 1===e.length?r.apply(void 0,e):o.apply(void 0,e)}function r(t){var e=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?e=Reflect.ownKeys(t.prototype):(e=Object.getOwnPropertyNames(t.prototype),"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t.prototype)))),e.forEach(function(e){if("constructor"!==e){var n=Object.getOwnPropertyDescriptor(t.prototype,e);"function"==typeof n.value&&Object.defineProperty(t.prototype,e,o(t,e,n))}}),t}function o(t,e,n){var r=n.value;if("function"!=typeof r)throw new Error("@autobind decorator can only be applied to methods not: "+typeof r);return{configurable:!0,get:function(){if(this===t.prototype||this.hasOwnProperty(e))return r;var n=r.bind(this);return Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),n}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),i=r(o);e["default"]={getItem:function(){return i["default"].getStore("menu").state.currentItem},getPosition:function(){var t=i["default"].getStore("menu").state,e=t.x,n=t.y;return{x:e,y:n}}}},function(t,e,n){var r,o;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r))t.push(n.apply(null,r));else if("object"===o)for(var s in r)i.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof t&&t.exports?t.exports=n:(r=[],o=function(){return n}.apply(e,r),!(void 0!==o&&(t.exports=o)))}()},function(t,e){"use strict";function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(){}r.prototype._events=void 0,r.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,r=new Array(n);n>e;e++)r[e]=this._events[t][e].fn;return r},r.prototype.emit=function(t,e,n,r,o,i){if(!this._events||!this._events[t])return!1;var s,a,c=this._events[t],u=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(t,c.fn,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,o),!0;case 6:return c.fn.call(c.context,e,n,r,o,i),!0}for(a=1,s=new Array(u-1);u>a;a++)s[a-1]=arguments[a];c.fn.apply(c.context,s)}else{var f,p=c.length;for(a=0;p>a;a++)switch(c[a].once&&this.removeListener(t,c[a].fn,!0),u){case 1:c[a].fn.call(c[a].context);break;case 2:c[a].fn.call(c[a].context,e);break;case 3:c[a].fn.call(c[a].context,e,n);break;default:if(!s)for(f=1,s=new Array(u-1);u>f;f++)s[f-1]=arguments[f];c[a].fn.apply(c[a].context,s)}}return!0},r.prototype.on=function(t,e,r){var o=new n(e,r||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],o]:this._events[t].push(o):this._events[t]=o,this},r.prototype.once=function(t,e,r){var o=new n(e,r||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],o]:this._events[t].push(o):this._events[t]=o,this},r.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var r=this._events[t],o=[];if(e&&(r.fn&&(r.fn!==e||n&&!r.once)&&o.push(r),!r.fn))for(var i=0,s=r.length;s>i;i++)(r[i].fn!==e||n&&!r[i].once)&&o.push(r[i]);return o.length?this._events[t]=1===o.length?o[0]:o:delete this._events[t],this},r.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.EventEmitter=r,r.EventEmitter2=r,r.EventEmitter3=r,t.exports=r},function(t,n){t.exports=e},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a,c,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(1),p=r(f),l=n(16),h=r(l),d=n(3),y=r(d),v=n(14),b=r(v),_=(c=a=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),u(e,[{key:"render",value:function(){return p["default"].createElement(h["default"],{flux:y["default"],connectToStores:["menu"]},p["default"].createElement(b["default"],this.props))}}]),e}(f.Component),a.propTypes={identifier:f.PropTypes.string.isRequired},a.displayName="ContextMenu",c);e["default"]=_},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e["default"]=function(t,e){return function(n){var r,p,d,v=n.displayName||n.name||"Component";return(0,y["default"])(t&&("string"==typeof t||"symbol"===("undefined"==typeof t?"undefined":f(t))||"function"==typeof t),"Expected identifier to be string, symbol or function. See %s",v),(0,y["default"])("function"==typeof e,"Expected configure to be a function. See %s",v),d=p=function(r){function a(){return o(this,a),i(this,Object.getPrototypeOf(a).apply(this,arguments))}return s(a,r),u(a,[{key:"componentDidMount",value:function(){document.addEventListener("contextmenu",this.handleContextClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("contextmenu",this.handleContextClick)}},{key:"handleContextClick",value:function(n){var r=n.target,o=(0,h.findDOMNode)(this);if(r==o||o.contains(r)){var i=e(this.props);(0,y["default"])((0,b["default"])(i),"Expected configure to return an object. See %s",v),n.preventDefault();var s=w["default"].getActions("menu");s.setParams({x:n.clientX,y:n.clientY,currentItem:i,isVisible:"function"==typeof t?t(this.props):t})}}},{key:"render",value:function(){return l["default"].createElement(n,c({},this.props,{identifier:t}))}}]),a}(n),p.displayName=v+"ContextMenuLayer",r=d,a(r.prototype,"handleContextClick",[g["default"]],Object.getOwnPropertyDescriptor(r.prototype,"handleContextClick"),r.prototype),r}};var p=n(1),l=r(p),h=n(9),d=n(24),y=r(d),v=n(25),b=r(v),_=n(5),g=r(_),m=n(3),w=r(m)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),c=function(t){function e(){return r(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return i(e,t),s(e,[{key:"setParams",value:function(t){return t}}]),e}(a.Actions);e["default"]=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),c=function(t){function e(t){r(this,e);var n=o(this,Object.getPrototypeOf(e).call(this)),i=t.getActions("menu");return n.register(i.setParams,n.onSetParams),n.state={x:0,y:0,isVisible:!1,currentItem:{}},n}return i(e,t),s(e,[{key:"onSetParams",value:function(t){this.setState(t)}}]),e}(a.Store);e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var c,u,f,p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),h=r(l),d=n(9),y=n(7),v=r(y),b=n(5),_=r(b),g=(f=u=function(t){function e(t){o(this,e);var n=i(this,Object.getPrototypeOf(e).call(this,t));return n.state={position:"fixed",left:0,right:0},n}return s(e,t),p(e,[{key:"componentDidMount",value:function(){this.localNode=(0,d.findDOMNode)(this.refs.menu)}},{key:"componentWillReceiveProps",value:function(t){var e=this;if(this._unbindHandlers(),t.isVisible){var n="requestAnimationFrame"in window?window.requestAnimationFrame:setTimeout;n(function(){return e.setState(e.getMenuPosition(t.x,t.y))})}}},{key:"shouldComponentUpdate",value:function(t){return this.props.isVisible!==t.visible}},{key:"componentDidUpdate",value:function(){this.props.isVisible&&this._bindHandlers()}},{key:"componentWillUnmount",value:function(){this._unbindHandlers(),delete this.localNode}},{key:"getMenuPosition",value:function(t,e){var n=(0,d.findDOMNode)(this.refs.menu),r=document.documentElement.scrollTop,o=document.documentElement.scrollLeft,i=window,s=i.screen,a=s.availWidth,c=s.availHeight,u=n.offsetWidth,f=n.offsetHeight,p={};return p.top=e+o,e+f>c&&(p.top-=f),p.left=t+r,t+u>a&&(p.left-=u),p}},{key:"_outsideClickHandler",value:function(t){var e=this.props,n=e.isVisible,r=e.identifier;if(n===r){for(var o=this.localNode,i=t.target,s=!1;i.parentNode;){if(s=i===o)return;i=i.parentNode}this._hideMenu()}}},{key:"_hideMenu",value:function(){this.props.flux.getActions("menu").setParams({isVisible:!1,currentItem:{}})}},{key:"_bindHandlers",value:function(){var t=this._outsideClickHandler,e=this._hideMenu;document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),window.addEventListener("resize",e),document.addEventListener("scroll",e)}},{key:"_unbindHandlers",value:function(){var t=this._outsideClickHandler,e=this._hideMenu;document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t),window.removeEventListener("resize",e),document.removeEventListener("scroll",e)}},{key:"render",value:function(){var t=this.props,e=(t.currentItem,t.isVisible),n=t.identifier,r=(0,v["default"])({"context-menu":!0,open:e===n});return h["default"].createElement("div",{className:r,style:this.state},h["default"].createElement("ul",{ref:"menu",className:"dropdown-menu"},this.props.children))}}]),e}(l.Component),u.displayName="MenuContainer",c=f,a(c.prototype,"getMenuPosition",[_["default"]],Object.getOwnPropertyDescriptor(c.prototype,"getMenuPosition"),c.prototype),a(c.prototype,"_outsideClickHandler",[_["default"]],Object.getOwnPropertyDescriptor(c.prototype,"_outsideClickHandler"),c.prototype),a(c.prototype,"_hideMenu",[_["default"]],Object.getOwnPropertyDescriptor(c.prototype,"_hideMenu"),c.prototype),a(c.prototype,"_bindHandlers",[_["default"]],Object.getOwnPropertyDescriptor(c.prototype,"_bindHandlers"),c.prototype),a(c.prototype,"_unbindHandlers",[_["default"]],Object.getOwnPropertyDescriptor(c.prototype,"_unbindHandlers"),c.prototype),c);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a,c,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(1),p=r(f),l=n(7),h=r(l),d=n(2),y=r(d),v=n(3),b=r(v),_=n(6),g=r(_),m=(c=a=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),u(e,[{key:"handleClick",value:function(t){var e=this.props,n=e.disabled,r=e.onSelect,o=e.onClick,i=e.data;return n?void t.preventDefault():((0,y["default"])(i,g["default"].getItem()),"function"==typeof r?(t.preventDefault(),r(i),void this.hideMenu()):("function"==typeof o&&o(t,i),void this.hideMenu()))}},{key:"hideMenu",value:function(){b["default"].getActions("menu").setParams({isVisible:!1,currentItem:{}})}},{key:"render",value:function(){var t=this.props,e=t.divider,n=t.disabled,r=t.selected,o=t.children;if(e)return p["default"].createElement("li",{className:"divider"});var i=(0,h["default"])({disabled:n,active:r});return p["default"].createElement("li",{className:i},p["default"].createElement("a",{href:"#",onMouseDown:this.handleClick.bind(this)},o))}}]),e}(f.Component),a.displayName="MenuItem",a.propTypes={data:f.PropTypes.object,disabled:f.PropTypes.bool,divider:f.PropTypes.bool,onClick:f.PropTypes.func,onSelect:f.PropTypes.func,selected:f.PropTypes.bool},a.defaultProps={disabled:!1,selected:!1,data:{}},c);e["default"]=m},function(t,e,n){t.exports=n(19)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return t&&"function"==typeof t.then}e.__esModule=!0;var s=n(26),a=r(s),c=function(){function t(){o(this,t),this._baseId=(0,a["default"])();for(var e=this._getActionMethodNames(),n=0;n<e.length;n++){var r=e[n];this._wrapAction(r)}this.getConstants=this.getActionIds}return t.prototype.getActionIds=function(){var t=this;return this._getActionMethodNames().reduce(function(e,n){return e[n]=t[n]._id,e},{})},t.prototype._getActionMethodNames=function(t){var e=this;return Object.getOwnPropertyNames(this.constructor.prototype).filter(function(t){return"constructor"!==t&&"function"==typeof e[t]})},t.prototype._wrapAction=function(t){var e=this,n=this[t],r=this._createActionId(t),o=function(){for(var o=arguments.length,s=Array(o),a=0;o>a;a++)s[a]=arguments[a];var c=n.apply(e,s);if(i(c)){var u=c;e._dispatchAsync(r,u,s,t)}else e._dispatch(r,c,s,t);return c};o._id=r,this[t]=o},t.prototype._createActionId=function(t){return this._baseId+"-"+t},t.prototype._dispatch=function(t,e,n,r){return"function"==typeof this.dispatch&&"undefined"!=typeof e&&this.dispatch(t,e,n),e},t.prototype._dispatchAsync=function(t,e,n,r){"function"==typeof this.dispatchAsync&&this.dispatchAsync(t,e,n)},t}();e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return"function"==typeof t?t._id:t}e.__esModule=!0;var c=n(8),u=r(c),f=n(2),p=r(f),l=function(t){function e(){o(this,e);var n=i(this,t.call(this));return n.state=null,n._handlers={},n._asyncHandlers={},n._catchAllHandlers=[],n._catchAllAsyncHandlers={begin:[],success:[],failure:[]},n}return s(e,t),e.prototype.setState=function(t){if("function"==typeof t){var e=this._isHandlingDispatch?this._pendingState:this.state;t=t(e)}this._isHandlingDispatch?(this._pendingState=this._assignState(this._pendingState,t),this._emitChangeAfterHandlingDispatch=!0):(this.state=this._assignState(this.state,t),this.emit("change"))},e.prototype.replaceState=function(t){this._isHandlingDispatch?(this._pendingState=this._assignState(void 0,t),this._emitChangeAfterHandlingDispatch=!0):(this.state=this._assignState(void 0,t),this.emit("change"))},e.prototype.getStateAsObject=function(){return this.state},e.assignState=function(t,e){return(0,p["default"])({},t,e)},e.prototype._assignState=function(){return(this.constructor.assignState||e.assignState).apply(void 0,arguments)},e.prototype.forceUpdate=function(){this._isHandlingDispatch?this._emitChangeAfterHandlingDispatch=!0:this.emit("change")},e.prototype.register=function(t,e){t=a(t),"function"==typeof e&&(this._handlers[t]=e.bind(this))},e.prototype.registerAsync=function(t,e,n,r){t=a(t);var o=this._bindAsyncHandlers({begin:e,success:n,failure:r});this._asyncHandlers[t]=o},e.prototype.registerAll=function(t){"function"==typeof t&&this._catchAllHandlers.push(t.bind(this))},e.prototype.registerAllAsync=function(t,e,n){var r=this,o=this._bindAsyncHandlers({begin:t,success:e,failure:n});Object.keys(o).forEach(function(t){r._catchAllAsyncHandlers[t].push(o[t])})},e.prototype._bindAsyncHandlers=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];"function"==typeof n?t[e]=n.bind(this):delete t[e]}return t},e.prototype.waitFor=function(t){this._waitFor(t)},e.prototype.handler=function(t){var e=t.body,n=t.actionId,r=t.async,o=t.actionArgs,i=t.error,s=this._catchAllHandlers,a=this._handlers[n],c=this._catchAllAsyncHandlers[r],u=this._asyncHandlers[n]&&this._asyncHandlers[n][r];if(r){var f=c.concat([u]);switch(r){case"begin":return void this._performHandler(f,o);case"failure":return void this._performHandler(f,[i]);case"success":return void this._performHandler(c.concat([u||a].concat(u&&[]||s)),[e]);default:return}}this._performHandler(s.concat([a]),[e])},e.prototype._performHandler=function(t,e){this._isHandlingDispatch=!0,this._pendingState=this._assignState(void 0,this.state),this._emitChangeAfterHandlingDispatch=!1;try{this._performHandlers(t,e)}finally{this._emitChangeAfterHandlingDispatch&&(this.state=this._pendingState,this.emit("change")),this._isHandlingDispatch=!1,this._pendingState=void 0,this._emitChangeAfterHandlingDispatch=!1}},e.prototype._performHandlers=function(t,e){var n=this;t.forEach(function(t){return"function"==typeof t&&t.apply(n,e)})},e}(u["default"]);e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var c=n(1),u=r(c),f=n(20),p=n(2),l=r(p),h=function(t){function e(n,r){i(this,e);var o=s(this,t.call(this,n,r));return o.initialize(),o.state=o.connectToStores(n.connectToStores,n.stateGetter),o.wrapChild=o.wrapChild.bind(o),o}return a(e,t),e.prototype.wrapChild=function(t){return u["default"].cloneElement(t,this.getChildProps())},e.prototype.getChildProps=function(){var t=this.props,e=(t.children,t.render,t.connectToStores,t.stateGetter,t.flux,o(t,["children","render","connectToStores","stateGetter","flux"]));return(0,l["default"])({flux:this.getFlux()},this.state,e)},e.prototype.render=function(){var t=this.props,e=t.children,n=t.render;if("function"==typeof n)return n(this.getChildProps(),this.getFlux());if(!e)return null;if(Array.isArray(e))return u["default"].createElement("span",null,u["default"].Children.map(e,this.wrapChild));var r=e;return this.wrapChild(r)},e}(u["default"].Component);(0,l["default"])(h.prototype,f.instanceMethods),(0,l["default"])(h,f.staticProperties),e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){return function(){var t=n(e,this.props);this.setState(t)}.bind(t)}function i(t){return t.getStateAsObject()}function s(t){return t.reduce(function(t,e){return(0,p["default"])(t,e.getStateAsObject())},{})}e.__esModule=!0,e.staticProperties=e.instanceMethods=void 0;var a=n(1),c=r(a),u=n(4),f=n(2),p=r(f),l={getChildContext:function(){var t=this.getFlux();return t?{flux:t}:{}},getFlux:function(){return this.props.flux||this.context.flux},initialize:function(){if(this._fluxStateGetters=[],this._fluxListeners={},this.flux=this.getFlux(),!(this.flux instanceof u.Flux))throw new Error("fluxMixin: Could not find Flux instance. Ensure that your component has either `this.context.flux` or `this.props.flux`.")},componentWillUnmount:function(){var t=this.getFlux();for(var e in this._fluxListeners)if(this._fluxListeners.hasOwnProperty(e)){var n=t.getStore(e);if("undefined"!=typeof n){var r=this._fluxListeners[e];n.removeListener("change",r)}}},componentWillReceiveProps:function(t){this.updateStores(t)},updateStores:function(){var t=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],e=this.getStoreState(t);this.setState(e)},getStoreState:function(){var t=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];return this._fluxStateGetters.reduce(function(e,n){var r=n.getter,o=n.stores,i=r(o,t);return(0,p["default"])(e,i)},{})},connectToStores:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=this.getFlux(),a=function(t){var e=r.getStore(t);if("undefined"==typeof e)throw new Error("connectToStores(): Store with key '"+t+"' does not exist.");return e};if("string"==typeof e){var c=e,u=a(c),f=n||i;this._fluxStateGetters.push({stores:u,getter:f});var p=o(this,u,f);u.addListener("change",p),this._fluxListeners[c]=p}else if(Array.isArray(e))!function(){var r=e.map(a),i=n||s;t._fluxStateGetters.push({stores:r,getter:i});var c=o(t,r,i);e.forEach(function(e,n){var o=r[n];o.addListener("change",c),t._fluxListeners[e]=c})}();else for(var c in e){var u=a(c),f=e[c]||i;this._fluxStateGetters.push({stores:u,getter:f});var p=o(this,u,f);u.addListener("change",p),this._fluxListeners[c]=p}return this.getStoreState()}},h={contextTypes:{flux:a.PropTypes.instanceOf(u.Flux)},childContextTypes:{flux:a.PropTypes.instanceOf(u.Flux)},propTypes:{connectToStores:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.arrayOf(a.PropTypes.string),a.PropTypes.object]),flux:a.PropTypes.instanceOf(u.Flux),render:c["default"].PropTypes.func,stateGetter:c["default"].PropTypes.func}};e.instanceMethods=l,e.staticProperties=h},function(t,e,n){t.exports.Dispatcher=n(22)},function(t,e,n){"use strict";function r(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var o=n(23),i=1,s="ID_";r.prototype.register=function(t){var e=s+i++;return this.$Dispatcher_callbacks[e]=t,e},r.prototype.unregister=function(t){o(this.$Dispatcher_callbacks[t],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this.$Dispatcher_callbacks[t]},r.prototype.waitFor=function(t){o(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var e=0;e<t.length;e++){var n=t[e];this.$Dispatcher_isPending[n]?o(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(o(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this.$Dispatcher_invokeCallback(n))}},r.prototype.dispatch=function(t){o(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e)}finally{this.$Dispatcher_stopDispatching()}},r.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},r.prototype.$Dispatcher_invokeCallback=function(t){this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0},r.prototype.$Dispatcher_startDispatching=function(t){for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0},r.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},t.exports=r},function(t,e){"use strict";var n=function(t,e,n,r,o,i,s,a){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,i,s,a],f=0;c=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return u[f++]}))}throw c.framesToPop=1,c}};t.exports=n},function(t,e,n){"use strict";var r=function(t,e,n,r,o,i,s,a){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,i,s,a],f=0;c=new Error(e.replace(/%s/g,function(){return u[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};t.exports=r},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e){"use strict";var n=0,r=t.exports=function(t){t=t||{};var e=t.prefix,r=t.suffix,o=++n*(t.multiplier||1);return null==e&&(e=""),null==r&&(r=""),String(e)+o+String(r)};r.reset=function(){return n=0}}])});